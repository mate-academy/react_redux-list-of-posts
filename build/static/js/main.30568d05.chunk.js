(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(28)},25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(5),c=n.n(o),s=n(1),i=n(6),l=n(10),u=n(11),m=n(4),p=n(14);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f={ADD_POSTS:"POSTS::ADD",SWITCH_LOADING:"LOADING::SWITCH",IS_INITIALIZED:"INITIALIZED::IS",HAS_ERROR:"ERROR::HAS",IS_SORT:"IS::SORT",ADD_SORTED_POSTS:"SORTED_POSTS::ADD",DELETE_POST:"POST::DELETE",ADD_TEXT:"TEXT::ADD",POSTS_SORT:"POST::SORT",RESET_FILTER:"RESET::FILTER",DELETE_COMMENT:"DELETE::COMMENT"},S=function(e){return{type:f.SWITCH_LOADING,payload:e}},O=function(e){return{type:f.HAS_ERROR,payload:e}},T=function(){return function(e){var t;e(S(!0)),e((t=!0,{type:f.IS_INITIALIZED,payload:t})),e(O(!1)),Promise.all([fetch("https://jsonplaceholder.typicode.com/posts"),fetch("https://jsonplaceholder.typicode.com/users"),fetch("https://jsonplaceholder.typicode.com/comments")]).then(function(e){var t=Object(u.a)(e,3),n=t[0],r=t[1],a=t[2];return Promise.all([n.json(),r.json(),a.json()])}).then(function(t){var n=Object(u.a)(t,3),r=n[0],a=n[1],o=n[2],c=a.reduce(function(e,t){return E({},e,Object(l.a)({},t.id,t))},{});function s(e,t,n){return e.map(function(e){return E({},e,{comments:t.filter(function(t){return t.postId===e.id}),user:n[e.userId]})})}var i,m=s(r,o,c),p=s(r,o,c);e(S(!1)),e(function(e){return{type:f.ADD_POSTS,payload:e}}(m)),e((i=p,{type:f.ADD_SORTED_POSTS,payload:i}))}).catch(function(){e(O(!0)),e(S(!1))})}},y={posts:[],postsSorted:[],isLoading:!1,isInitialized:!1,hasError:!1,isSorted:!1,templateForFilter:""};var b=Object(m.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.ADD_POSTS:return E({},e,{posts:Object(i.a)(t.payload)});case f.POSTS_SORT:return E({},e,{postsSorted:e.posts.filter(function(t){return t.title.includes(e.templateForFilter)||t.body.includes(e.templateForFilter)}),templateForFilter:""});case f.RESET_FILTER:return E({},e,{postsSorted:Object(i.a)(e.posts)});case f.ADD_TEXT:return E({},e,{templateForFilter:t.payload});case f.DELETE_POST:return E({},e,{posts:e.posts.filter(function(e){return e.id!==t.payload}),postsSorted:e.postsSorted.filter(function(e){return e.id!==t.payload})});case f.DELETE_COMMENT:return E({},e,{posts:e.posts.map(function(e){return e.id===t.idPost?E({},e,{comments:e.comments.filter(function(e){return e.id!==t.payload})}):e}),postsSorted:e.postsSorted.map(function(e){return e.id===t.idPost?E({},e,{comments:e.comments.filter(function(e){return e.id!==t.payload})}):e})});case f.ADD_SORTED_POSTS:return E({},e,{postsSorted:Object(i.a)(t.payload)});case f.SWITCH_LOADING:return E({},e,{isLoading:t.payload});case f.IS_INITIALIZED:return E({},e,{isInitialized:t.payload});case f.HAS_ERROR:return E({},e,{hasError:t.payload});case f.IS_SORT:return E({},e,{isSorted:!e.isSorted});default:return e}},Object(m.a)(p.a));var _=function(e){var t=e.user,n=t.name,r=t.email;return a.a.createElement("div",null,a.a.createElement("div",null,n),a.a.createElement("div",null,r),a.a.createElement("div",null,"\n          ".concat(t.address.city,",\n          ").concat(t.address.street,",\n          ").concat(t.address.suite,"\n        ")))};n(25);var D=function(e){var t=e.comment,n=e.deleteComment,r=t.name,o=t.email,c=t.body;return a.a.createElement("div",null,a.a.createElement("div",{className:"comment__comm"},c),a.a.createElement("div",{className:"border"},a.a.createElement("p",{className:"comment__text-comm"},r),a.a.createElement("p",{className:"comment__text-comm"},o)),a.a.createElement("button",{type:"button",onClick:function(){return n(t.id,t.postId)}},"Remove comment"))},v=Object(s.b)(null,function(e){return{deleteComment:function(t,n){return e(function(e,t){return{type:f.DELETE_COMMENT,payload:e,idPost:t}}(t,n))}}})(D);var I=function(e){var t=e.comments;return a.a.createElement("div",null,t.map(function(e){return a.a.createElement(v,{comment:e,key:e.id})}))};n(26);var P=function(e){var t=e.post,n=e.deletePost,r=t.title,o=t.body,c=t.comments;return a.a.createElement("div",null,a.a.createElement("div",{className:"post"},a.a.createElement("h2",{className:"post__title"},r),a.a.createElement("p",{className:"post__text"},o),a.a.createElement(_,{user:t.user})),a.a.createElement("button",{type:"button",onClick:function(){return n(t.id)}},"Remove post"),a.a.createElement(I,{comments:c}))},R=Object(s.b)(null,function(e){return{deletePost:function(t){return e((n=t,{type:f.DELETE_POST,payload:n}));var n}}})(P);var h=function(e){return e.postsSorted.map(function(e){return a.a.createElement(R,{post:e,key:e.id})})},j=Object(s.b)(function(e){return{postsSorted:e.postsSorted}})(h),F=(n(27),function(e){var t=e.receivePosts,n=e.isLoading,r=e.hasError,o=e.isInitialized,c=e.addTextForFilter,s=e.templateForFilter,i=e.sortPosts,l=e.resetFilter;return n?a.a.createElement("p",{className:"loading"},"Loading..."):r?a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{className:"app__title"},"You want to upload again."),a.a.createElement("button",{type:"button",className:"btn btn-warning load load-again",onClick:t},"Load again")):o?a.a.createElement("div",{className:"app"},a.a.createElement("h1",{className:"app__title"},"Static list of posts"),a.a.createElement("form",{onSubmit:function(e){return i(e)}},a.a.createElement("input",{onChange:function(e){return c(e.target.value)},value:s,type:"text",className:"text-template"})),a.a.createElement("button",{onClick:l,type:"button",className:"button_reset btn btn-primary load"},"Reset"),a.a.createElement(j,null)):a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{className:"app__title"},"Want to upload a list of posts?"),a.a.createElement("button",{type:"button",className:"btn btn-primary load",onClick:t},"Load"))}),L=Object(s.b)(function(e){return{isLoading:e.isLoading,isInitialized:e.isInitialized,hasError:e.hasError,templateForFilter:e.templateForFilter}},function(e){return{receivePosts:function(){return e(T())},addTextForFilter:function(t){return e((n=t,{type:f.ADD_TEXT,payload:n}));var n},sortPosts:function(t){return e((t.preventDefault(),{type:f.POSTS_SORT}))},resetFilter:function(){return e({type:f.RESET_FILTER})}}})(F);c.a.render(a.a.createElement(s.a,{store:b},a.a.createElement(L,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.30568d05.chunk.js.map