(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(28)},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),c=n.n(a),s=n(1),i=n(15),u=n(6),l=n(4),m=n(13),d=function(e){return fetch(e).then(function(e){return e.json()})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setPosts":return t.posts;case"deletePost":return e.filter(function(e){return e.id!==t.postId});case"deleteComment":return e.map(function(e){return e.id===t.postId?Object(u.a)({},e,{comments:e.comments.filter(function(e){return e.id!==t.commentId})}):e});default:return e}},f=function(e){return{type:"setLoading",value:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setLoading":return t.value;default:return e}},v=function(e){return{type:"setError",value:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setError":return t.value;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setInitialized":return t.value;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setQuery":return t.query;default:return e}},g=function(e){return e.posts.filter(function(t){return(t.title+t.body).toLowerCase().includes(e.query)})},I=function(e){return e.isLoading},w=function(e){return e.hasError},_=function(e){return e.isInitialized},j=Object(l.c)({posts:p,isLoading:h,hasError:y,isInitialized:E,query:b}),N=Object(l.d)(j,Object(l.a)(m.a)),C=n(14),L=function(e){var t=e.user;return o.a.createElement("div",{className:"post__user"},o.a.createElement("p",null,"name: ".concat(t.name)),o.a.createElement("p",null,"city: ".concat(t.address.city)),o.a.createElement("p",null,"street: ".concat(t.address.street," ")),o.a.createElement("p",null,"suite: ".concat(t.address.suite," ")),o.a.createElement("p",null,"email: ".concat(t.email)))},k={deleteComment:function(e,t){return{type:"deleteComment",postId:e,commentId:t}}},O=Object(s.b)(function(){return{}},k)(function(e){var t=e.postId,n=e.deleteComment,r=e.comment;return o.a.createElement("div",{className:"comment"},o.a.createElement("button",{type:"button",className:"post__delete-button",onClick:function(){return n(t,r.id)}},"x"),o.a.createElement("div",{className:"comment__name"},r.name),o.a.createElement("div",{className:"comment__body"},r.body),o.a.createElement("div",{className:"comment__email"},r.email),o.a.createElement("hr",null))}),P=function(e){var t=e.postId,n=e.comments;return o.a.createElement("div",{className:"comment-list"},o.a.createElement("h3",null,"Comments"),o.a.createElement("hr",null),n.map(function(e){return o.a.createElement(O,{comment:e,key:e.id,postId:t})}))},z={deletePost:function(e){return{type:"deletePost",postId:e}}},q=Object(s.b)(function(){return{}},z)(function(e){var t=e.deletePost,n=e.post;return o.a.createElement("section",{className:"post"},o.a.createElement("article",{className:"post__content"},o.a.createElement("button",{className:"post__delete-button",type:"button",onClick:function(){return t(n.id)}},"x"),o.a.createElement("h2",null,n.title),o.a.createElement("p",null,n.body),o.a.createElement(L,{user:n.user})),o.a.createElement(P,{comments:n.comments,postId:n.id}),o.a.createElement("hr",null))}),x=Object(s.b)(function(e){return{posts:g(e)}})(function(e){return e.posts.map(function(e){return o.a.createElement(q,{key:e.id,post:e})})}),Q=(n(27),{setQuery:function(e){return{type:"setQuery",query:e}},getPostsFromServer:function(){return function(e){return e(v(!1)),e(f(!0)),Promise.all([d("https://jsonplaceholder.typicode.com/posts"),d("https://jsonplaceholder.typicode.com/users"),d("https://jsonplaceholder.typicode.com/comments")]).then(function(t){var n,r,o=Object(i.a)(t,3),a=o[0],c=o[1],s=o[2];e(function(e){return{type:"setPosts",posts:e}}((n=c,r=s,a.map(function(e){return Object(u.a)({},e,{user:n.find(function(t){return t.id===e.userId}),comments:r.filter(function(t){return t.postId===e.id})})})))),e({type:"setInitialized",value:!0})}).catch(function(){e(v(!0))}).finally(function(){e(f(!1))})}}}),S=Object(s.b)(function(e){return{isLoading:I(e),hasError:w(e),isInitialized:_(e)}},Q)(function(e){var t=e.isLoading,n=e.hasError,r=e.isInitialized,a=e.setQuery,c=e.getPostsFromServer;return o.a.createElement("div",{className:"App"},r&&o.a.createElement(C.DebounceInput,{debounceTimeout:500,type:"text",placeholder:"Search",className:"posts__search",onChange:function(e){var t=e.target.value;a(t.toLowerCase().trim())}}),!r&&!n&&o.a.createElement("button",{className:"load-button",type:"button",disabled:t,onClick:c},t?"Loading...":"Load posts"),!r&&n&&o.a.createElement("button",{className:"load-button",type:"button",disabled:t,onClick:c},t?"Loading...":"Try again"),r&&o.a.createElement(x,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(s.a,{store:N},o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.4aed6bc8.chunk.js.map